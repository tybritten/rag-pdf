{
  "pipeline": {
    "name": "gui"
  },
  "transform": {
    "image": "vmtyler/pdk:gui-v0.4.2c",
    "cmd": [
      "/bin/bash",
      "-C"
    ],
    "stdin": [
      "streamlit run gui.py -- --path-to-db /pfs/data --path-to-chat-model http://llama3.mlis.svc.cluster.local/v1 --model \"meta-llama/Meta-Llama-3.1-8B-Instruct\" --emb-model-path http://embed.mlis.svc.cluster.local/v1 --cutoff 0.4 --streaming"
    ],
    "env": {
      "PYTHON_UNBUFFERED": "1",
      "PACH_PROXY_EXTERNAL_URL_BASE": "http://192.168.11.100",
      "DOCUMENT_REPO": "documents"
    }
  },
  "input": {
    "pfs": {
      "repo": "embed-docs",
      "name": "data",
      "glob": "/"
    }
  },
  "schedulingSpec": {
    "nodeSelector": {
      "nvidia.com/gpu.product": "NVIDIA-A100-PCIE-40GB"
    }
  },
  "autoscaling": false,
  "service": {
    "type": "LoadBalancer",
    "externalPort": 80,
    "internalPort": 8501
  }
}
